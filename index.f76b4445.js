function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},s=t.parcelRequired7c6;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=s);var i=s("krGWQ");var o=s("5eWcy"),a=s("2pdLV"),c=s("fb9GJ"),d=s("3fHfs");const u=new class{fetchGenres(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=8a38092ae2d24fc685ebce0502669b7c&language=en-US").then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>{}))}fetchTrending(){return fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=8a38092ae2d24fc685ebce0502669b7c&page=${this.page}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>{}))}fetchMovies(){return fetch(`https://api.themoviedb.org/3/search/movie?api_key=8a38092ae2d24fc685ebce0502669b7c&query=${this.needToFind}&page=${this.page}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>{console.log("Error on try...catch",e)}))}addMoviesPage(e){this.page=e}resetMoviesPage(){this.page=1}get query(){return this.needToFind}set query(e){this.needToFind=e}constructor(){this.needToFind="",this.page=1}},l=new(0,o.default);let f="";i.refs.searchInput.addEventListener("submit",(async function(e){if(e.preventDefault(),u.query=e.currentTarget.elements.searchQuery.value,""===u.query)return;u.resetMoviesPage(),await y(),i.refs.SearchErrMessage.classList.contains("is-hidden")&&h.reset()}));const h=new(e(c))(i.refs.paginationContainer,d.options);function g(){u.fetchTrending().then((({results:e,total_results:t})=>{h.setTotalItems(t),(0,a.onMarkupCards)(e,i.refs.trandingContainer),l.saveTrendingCurentPage(e)}))}function p(){i.refs.trandingContainer.innerHTML=""}async function y(){const e=await u.fetchMovies();if(0===e.results.length)return i.refs.SearchErrMessage.classList.remove("is-hidden"),void(u.query=f);i.refs.SearchErrMessage.classList.add("is-hidden"),f=u.query,h.setTotalItems(e.total_results),p(),u.resetMoviesPage(),(0,a.onMarkupCards)(e.results,i.refs.trandingContainer),l.saveTrendingCurentPage(e.results)}!function(){l.getGeneresLS()||u.fetchGenres().then(l.saveGenersLS);g()}(),i.refs.paginationContainer.addEventListener("click",(function(){p();const e=h.getCurrentPage();u.addMoviesPage(e),""===u.query?g():""!==u.query&&y()}));const v=document.querySelector(".button-to-top"),w=document.querySelector(".to-top-icon");v.addEventListener("click",(function(){window.scrollTo(0,0)})),window.onscroll=function(){document.body.scrollTop>700||document.documentElement.scrollTop>700?(v.style.visibility="visible",w.style.opacity=1,v.style.opacity=1):(v.style.visibility="hiden",w.style.opacity=0,v.style.opacity=0)},s("5eWcy"),s("1wewW");
//# sourceMappingURL=index.f76b4445.js.map
