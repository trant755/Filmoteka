{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-5d02381bca7ce49e.js","src/js/generateTrandingCard.js","src/js/options-of-pagination.js","node_modules/@parcel/runtime-js/lib/runtime-9c8d57e592ab918e.js","src/js/fetchModule.js","src/js/buttonToTop.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.64630d92.js\\\",\\\"ehxus\\\":\\\"arrowssprite.6a2c4930.svg\\\",\\\"b9auz\\\":\\\"index.7306024c.js\\\"}\"));","import { refs } from './refs';\nimport MovieApiService from './fetchModule';\nimport localStorageAPI from './local-storage-api/local-storage-api';\nimport { onMarkupCards } from './onMarkupCards';\nimport Pagination from 'tui-pagination';\nimport { options } from './options-of-pagination';\n// import openModal from'./modalWindow';\n\nconst API = new MovieApiService();\nconst LS_API = new localStorageAPI();\n\nlet oldQuery = '';\n\nrefs.searchInput.addEventListener('submit', searchFilm);\n\nconst pagination = new Pagination(refs.paginationContainer, options);\n\nrefs.loader.classList.remove('is-hidden');\n\ngenerateHomePage();\n\nfunction generateHomePage() {\n  if (!LS_API.getGeneresLS()) {\n    API.fetchGenres().then(LS_API.saveGenersLS);\n  }\n  generateTrendingFilms();\n}\n\nfunction generateTrendingFilms() {\n  API.fetchTrending().then(({ results, total_results }) => {\n    pagination.setTotalItems(total_results);\n    onMarkupCards(results, refs.trandingContainer);\n    LS_API.saveTrendingCurentPage(results);\n\n    refs.loader.classList.add('is-hidden');\n  });\n}\n\nrefs.paginationContainer.addEventListener(\n  'click',\n  renderNewPageOfTrendingFilms\n);\n\nfunction renderNewPageOfTrendingFilms(e) {\n  if (\n    !e.target.classList.contains('tui-page-btn') ||\n    e.target.classList.contains('tui-is-selected') ||\n    e.target.classList.contains('tui-is-disabled')\n  )\n    return;\n  clearGallery();\n  const newCurrentPage = pagination.getCurrentPage();\n\n  API.addMoviesPage(newCurrentPage);\n  if (API.query === '') {\n    generateTrendingFilms();\n  } else if (API.query !== '') {\n    fetchSearchFilms();\n  }\n}\n\nfunction clearGallery() {\n  refs.trandingContainer.innerHTML = '';\n}\n\nasync function searchFilm(ev) {\n  ev.preventDefault();\n\n  API.query = ev.currentTarget.elements.searchQuery.value;\n\n  if (API.query === '') return;\n\n  API.resetMoviesPage();\n\n  refs.loader.classList.remove('is-hidden');\n\n  await fetchSearchFilms();\n  if (refs.SearchErrMessage.classList.contains('is-hidden')) {\n    pagination.reset();\n  }\n\n  refs.loader.classList.add('is-hidden');\n}\n\nasync function fetchSearchFilms() {\n  const data = await API.fetchMovies();\n\n  if (data.results.length === 0) {\n    refs.SearchErrMessage.classList.remove('is-hidden');\n\n    API.query = oldQuery;\n    return;\n  } else {\n    refs.SearchErrMessage.classList.add('is-hidden');\n  }\n  oldQuery = API.query;\n  pagination.setTotalItems(data.total_results);\n  clearGallery();\n  API.resetMoviesPage();\n  onMarkupCards(data.results, refs.trandingContainer);\n  LS_API.saveTrendingCurentPage(data.results);\n\n  hidePaginationForSearch(data);\n}\n\nfunction hidePaginationForSearch(data) {\n  if (data.total_pages === 1) {\n    refs.paginationContainer.style.display = 'none';\n  } else if (refs.paginationContainer.style.display === 'none') {\n    refs.paginationContainer.removeAttribute('style');\n  }\n}\n\n// function showLoader() {\n//   refs.loader.classList.remove('is-hidden');\n//   refs.loader.classList.add('is-hidden');\n// }\n\n// setTimeout(showLoader, 1000);\n","import sprite from '../images/icons/arrowssprite.svg';\n\nconst arrowIcon = `${sprite}#icon-arrow`;\nconst dotsIcon = `${sprite}#icon-dots`;\n\nexport const options = {\n    totalItems: 20000,\n    itemsPerPage: 20,\n    visiblePages: 5,\n    page: 1,\n    centerAlign: true,\n    usageStatistics: false,\n    // firstItemClassName: 'tui-first-child',\n    // lastItemClassName: 'tui-last-child',\n    template: {\n      page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n      currentPage: '<strong class=\"tui-page-btn tui-is-selected\">{{page}}p</strong>',\n      currentPage: '<a href=\"#\" class=\"tui-page-btn tui-is-selected\">{{page}}</a>',\n      moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}} hide-{{type}}\">' +\n        `<svg class=\"tui-ico-{{type}}\" width=\"16\" height=\"16\"><use href=\"${arrowIcon}-{{type}}\"></use></svg>` +\n        '</a>',\n      disabledMoveButton:\n        '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</span>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip change-{{type}}\">' +\n        `<svg class=\"tui-ico-ellip\" width=\"14\" height=\"14\"><use href=\"${dotsIcon}\"></use></svg>` +\n        '</a>',\n    }\n  };","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"ehxus\")).toString();","const API_WEB = 'https://api.themoviedb.org/3';\nconst API_KEY = 'api_key=8a38092ae2d24fc685ebce0502669b7c';\n\nexport default class MovieApiService {\n  constructor() {\n    this.needToFind = '';\n    this.page = 1;\n  }\n\n  fetchGenres() {\n    const responceGenres = fetch(\n      `${API_WEB}/genre/movie/list?${API_KEY}&language=en-US`\n    )\n      .then(responceGenres => {\n        if (!responceGenres.ok) {\n          throw new Error(responceGenres.status);\n        }\n        return responceGenres.json();\n      })\n      .catch(error => {\n        error;\n      });\n    return responceGenres;\n  }\n\n  fetchTrending() {\n    const responceTrending = fetch(\n      `${API_WEB}/trending/movie/day?${API_KEY}&page=${this.page}`\n    )\n      .then(responceTrending => {\n        if (!responceTrending.ok) {\n          throw new Error(responceTrending.status);\n        }\n        return responceTrending.json();\n      })\n      .catch(error => {\n        error;\n      });\n    return responceTrending;\n  }\n\n  fetchMovies() {\n    const response = fetch(\n      `${API_WEB}/search/movie?${API_KEY}&query=${this.needToFind}&page=${this.page}`\n    )\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n        return response.json();\n      })\n      .catch(error => {\n        console.log('Error on try...catch', error);\n      });\n    return response;\n  }\n\n  addMoviesPage(number) {\n    this.page = number;\n  }\n\n  resetMoviesPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.needToFind;\n  }\n\n  set query(newQuery) {\n    this.needToFind = newQuery;\n  }\n}\n","const toTopBtn = document.querySelector('.button-to-top');\nconst svgIcon = document.querySelector('.to-top-icon');\n\ntoTopBtn.addEventListener('click', onButtonClick);\n\nfunction onButtonClick() {\n  window.scrollTo(0, 0);\n}\n\nwindow.onscroll = function () {\n  scrollFunction();\n};\n\nfunction scrollFunction() {\n  if (\n    document.body.scrollTop > 700 ||\n    document.documentElement.scrollTop > 700\n  ) {\n    toTopBtn.style.visibility = 'visible';\n    svgIcon.style.opacity = 1;\n    toTopBtn.style.opacity = 1;\n  } else {\n    toTopBtn.style.visibility = 'hiden';\n    svgIcon.style.opacity = 0;\n    toTopBtn.style.opacity = 0;\n  }\n}\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$krGWQ","$25e452009aae3ef0$export$41c562ebe57d11e2","totalItems","itemsPerPage","visiblePages","page","centerAlign","usageStatistics","template","currentPage","moveButton","$parcel$interopDefault","$f002c755d956fbde$exports","URL","resolve","import","meta","url","toString","disabledMoveButton","moreButton","$45a10bbc04e58c91$var$API","fetchGenres","fetch","then","responceGenres","ok","status","json","catch","error","fetchTrending","this","responceTrending","fetchMovies","needToFind","response","console","log","addMoviesPage","number","resetMoviesPage","query","newQuery","constructor","$45a10bbc04e58c91$var$LS_API","$5eWcy","default","$45a10bbc04e58c91$var$oldQuery","refs","searchInput","addEventListener","async","ev","preventDefault","currentTarget","elements","searchQuery","value","loader","classList","remove","$45a10bbc04e58c91$var$fetchSearchFilms","SearchErrMessage","contains","$45a10bbc04e58c91$var$pagination","reset","add","$fb9GJ","paginationContainer","$45a10bbc04e58c91$var$generateTrendingFilms","results","total_results","setTotalItems","$2pdLV","onMarkupCards","trandingContainer","saveTrendingCurentPage","$45a10bbc04e58c91$var$clearGallery","innerHTML","data","total_pages","style","display","removeAttribute","$45a10bbc04e58c91$var$hidePaginationForSearch","getGeneresLS","saveGenersLS","$45a10bbc04e58c91$var$generateHomePage","e","target","newCurrentPage","getCurrentPage","$baa382108c2f403f$var$toTopBtn","document","querySelector","$baa382108c2f403f$var$svgIcon","window","scrollTo","onscroll","body","scrollTop","documentElement","visibility","opacity"],"version":3,"file":"index.64630d92.js.map"}