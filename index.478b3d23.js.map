{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-aa4d593f8cc65eb9.js","src/js/generateTrandingCard.js","src/js/options-of-pagination.js","node_modules/@parcel/runtime-js/lib/runtime-87a0493c666037cd.js","src/js/buttonToTop.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"EVgbq\\\":\\\"index.478b3d23.js\\\",\\\"cHgtv\\\":\\\"arrowssprite.6a2c4930.svg\\\",\\\"2hvCh\\\":\\\"index.13683b33.js\\\"}\"));","import { refs } from './refs';\nimport MovieApiService from './fetchModule';\nimport localStorageAPI from './local-storage-api/local-storage-api';\nimport { onMarkupCards } from './onMarkupCards';\nimport Pagination from 'tui-pagination';\nimport { options } from './options-of-pagination';\nimport {initChangeOfThemeOnMain} from './dark-theme';\n// import openModal from'./modalWindow';\n\nconst API = new MovieApiService();\nconst LS_API = new localStorageAPI();\n\nlet oldQuery = '';\n\nrefs.searchInput.addEventListener('submit', searchFilm);\n\nconst pagination = new Pagination(refs.paginationContainer, options);\n\nrefs.loader.classList.remove('is-hidden');\n\ninitChangeOfThemeOnMain();\ngenerateHomePage();\n\nfunction generateHomePage() {\n  if (!LS_API.getGeneresLS()) {\n    API.fetchGenres().then(LS_API.saveGenersLS);\n  }\n\n  // getSiteTheme();\n  generateTrendingFilms();\n}\n\nfunction generateTrendingFilms() {\n  API.fetchTrending().then(({ results, total_results }) => {\n    pagination.setTotalItems(total_results);\n    onMarkupCards(results, refs.trandingContainer);\n    LS_API.saveTrendingCurentPage(results);\n\n    refs.loader.classList.add('is-hidden');\n  });\n}\n\nrefs.paginationContainer.addEventListener(\n  'click',\n  renderNewPageOfTrendingFilms\n);\n\nfunction renderNewPageOfTrendingFilms(e) {\n  if (\n    // !e.target.classList.contains('tui-page-btn') ||\n    // e.target.classList.contains('tui-is-selected') ||\n    // e.target.classList.contains('tui-is-disabled')\n    e.target.classList.contains('tui-pagination')\n  )\n    return;\n\n  clearGallery();\n\n  const newCurrentPage = pagination.getCurrentPage();\n\n  API.addMoviesPage(newCurrentPage);\n\n  if (API.query === '') {\n    generateTrendingFilms();\n  } else if (API.query !== '') {\n    fetchSearchFilms();\n  }\n}\n\nfunction clearGallery() {\n  refs.trandingContainer.innerHTML = '';\n}\n\nasync function searchFilm(ev) {\n  ev.preventDefault();\n\n  API.query = ev.currentTarget.elements.searchQuery.value;\n\n  if (API.query === '') return;\n\n  API.resetMoviesPage();\n\n  refs.loader.classList.remove('is-hidden');\n\n  await fetchSearchFilms();\n  if (refs.SearchErrMessage.classList.contains('is-hidden')) {\n    pagination.reset();\n  }\n\n  refs.loader.classList.add('is-hidden');\n}\n\nasync function fetchSearchFilms() {\n  const data = await API.fetchMovies();\n\n  if (data.results.length === 0) {\n    refs.SearchErrMessage.classList.remove('is-hidden');\n    setTimeout(() => refs.SearchErrMessage.classList.add('is-hidden'), 4000);\n\n    API.query = oldQuery;\n    return;\n  } else {\n    refs.SearchErrMessage.classList.add('is-hidden');\n  }\n  oldQuery = API.query;\n  pagination.setTotalItems(data.total_results);\n  clearGallery();\n  API.resetMoviesPage();\n  onMarkupCards(data.results, refs.trandingContainer);\n  LS_API.saveTrendingCurentPage(data.results);\n\n  hidePaginationForSearch(data);\n}\n\nfunction hidePaginationForSearch(data) {\n  if (data.total_pages === 1) {\n    refs.paginationContainer.style.display = 'none';\n  } else if (refs.paginationContainer.style.display === 'none') {\n    refs.paginationContainer.removeAttribute('style');\n  }\n}\n","import sprite from '../images/icons/arrowssprite.svg';\n\nconst arrowIcon = `${sprite}#icon-arrow`;\nconst dotsIcon = `${sprite}#icon-dots`;\n\nexport const options = {\n    totalItems: 20000,\n    itemsPerPage: 20,\n    visiblePages: 5,\n    page: 1,\n    centerAlign: true,\n    usageStatistics: false,\n    firstItemClassName: 'tui-first-child',\n    lastItemClassName: 'tui-next',\n    template: {\n      page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n      currentPage: '<strong class=\"tui-page-btn tui-is-selected\">{{page}}p</strong>',\n      currentPage: '<a href=\"#\" class=\"tui-page-btn tui-is-selected\">{{page}}</a>',\n      moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}} hide-{{type}}\">' +\n        `<svg class=\"tui-ico-{{type}}\" width=\"16\" height=\"16\"><use href=\"${arrowIcon}-{{type}}\"></use></svg>` +\n        '</a>',\n      disabledMoveButton:\n        '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\" onclick=\"return false\">' +\n        '<span class=\"tui-ico-{{type}}\" onclick=\"return false\">{{type}}</span>' +\n        '</span>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip change-{{type}}\">' +\n        `<svg class=\"tui-ico-ellip\" width=\"14\" height=\"14\"><use href=\"${dotsIcon}\"></use></svg>` +\n        '</a>',\n    }\n  };","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"cHgtv\");","// const toTopBtn = document.querySelector('.button-to-top');\n// const svgIcon = document.querySelector('.to-top-icon');\n\nimport { refs } from './refs';\n\nrefs.toTopBtn.addEventListener('click', onButtonClick);\n\nfunction onButtonClick() {\n  window.scrollTo(0, 0);\n}\n\nwindow.onscroll = function () {\n  scrollFunction();\n};\n\nfunction scrollFunction() {\n  if (\n    document.body.scrollTop > 700 ||\n    document.documentElement.scrollTop > 700\n  ) {\n    refs.toTopBtn.style.visibility = 'visible';\n    refs.svgIcon.style.opacity = 1;\n    refs.toTopBtn.style.opacity = 1;\n  } else {\n    refs.toTopBtn.style.visibility = 'hiden';\n    refs.svgIcon.style.opacity = 0;\n    refs.toTopBtn.style.opacity = 0;\n  }\n}\n"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$hKHmD","$fb0dcb22d1830d94$exports","getBundleURL","resolve","$f08023873a632759$var$_obj","$f08023873a632759$var$arrowIcon","concat","$parcel$interopDefault","$f08023873a632759$var$dotsIcon","$f08023873a632759$export$41c562ebe57d11e2","totalItems","itemsPerPage","visiblePages","page","centerAlign","usageStatistics","firstItemClassName","lastItemClassName","template","currentPage","$fe68b363cfe78113$var$API","$aCkdX","default","$fe68b363cfe78113$var$LS_API","$8OZy9","$fe68b363cfe78113$var$oldQuery","$4Nugj","refs","searchInput","addEventListener","ev","$fe68b363cfe78113$var$_searchFilm","apply","this","arguments","$fe68b363cfe78113$var$pagination","$1VFfL","paginationContainer","$fe68b363cfe78113$var$generateTrendingFilms","fetchTrending","then","param","results","total_results","setTotalItems","$hq2Yf","onMarkupCards","trandingContainer","saveTrendingCurentPage","loader","classList","add","$fe68b363cfe78113$var$clearGallery","innerHTML","$2TvXO","mark","_callee","preventDefault","query","currentTarget","elements","searchQuery","value","resetMoviesPage","remove","$fe68b363cfe78113$var$fetchSearchFilms","SearchErrMessage","contains","reset","$fe68b363cfe78113$var$_fetchSearchFilms","data","fetchMovies","_ctx","sent","length","setTimeout","$fe68b363cfe78113$var$hidePaginationForSearch","total_pages","style","display","removeAttribute","$32ZrB","initChangeOfThemeOnMain","getGeneresLS","fetchGenres","saveGenersLS","$fe68b363cfe78113$var$generateHomePage","e","target","newCurrentPage","getCurrentPage","addMoviesPage","toTopBtn","window","scrollTo","onscroll","document","body","scrollTop","documentElement","visibility","svgIcon","opacity"],"version":3,"file":"index.478b3d23.js.map"}