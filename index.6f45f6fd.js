function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},n={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in s)return s[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return s[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequired7c6=r),r("kyEFX").register(JSON.parse('{"5ZPII":"index.6f45f6fd.js","ehxus":"arrowssprite.6a2c4930.svg","b9auz":"index.daa4e3ea.js"}'));var i=r("krGWQ");var a,o=r("5eWcy"),c=r("2pdLV"),l=r("fb9GJ");const d={totalItems:2e4,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,usageStatistics:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-next",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}p</strong>',currentPage:'<a href="#" class="tui-page-btn tui-is-selected">{{page}}</a>',moveButton:`<a href="#" class="tui-page-btn tui-{{type}} hide-{{type}}"><svg class="tui-ico-{{type}}" width="16" height="16"><use href="${`${e(a=new URL(r("kyEFX").resolve("ehxus"),import.meta.url).toString())}#icon-arrow`}-{{type}}"></use></svg></a>`,disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}" onclick="return false"><span class="tui-ico-{{type}}" onclick="return false">{{type}}</span></span>',moreButton:`<a href="#" class="tui-page-btn tui-{{type}}-is-ellip change-{{type}}"><svg class="tui-ico-ellip" width="14" height="14"><use href="${`${e(a)}#icon-dots`}"></use></svg></a>`}},u=new class{fetchGenres(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=8a38092ae2d24fc685ebce0502669b7c&language=en-US").then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>{}))}fetchTrending(){return fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=8a38092ae2d24fc685ebce0502669b7c&page=${this.page}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>{}))}fetchMovies(){return fetch(`https://api.themoviedb.org/3/search/movie?api_key=8a38092ae2d24fc685ebce0502669b7c&query=${this.needToFind}&page=${this.page}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>{console.log("Error on try...catch",e)}))}addMoviesPage(e){this.page=e}resetMoviesPage(){this.page=1}get query(){return this.needToFind}set query(e){this.needToFind=e}constructor(){this.needToFind="",this.page=1}},g=new(0,o.default);let p="";i.refs.searchInput.addEventListener("submit",(async function(e){if(e.preventDefault(),u.query=e.currentTarget.elements.searchQuery.value,""===u.query)return;u.resetMoviesPage(),i.refs.loader.classList.remove("is-hidden"),await v(),i.refs.SearchErrMessage.classList.contains("is-hidden")&&f.reset();i.refs.loader.classList.add("is-hidden")}));const f=new(e(l))(i.refs.paginationContainer,d);function h(){u.fetchTrending().then((({results:e,total_results:t})=>{f.setTotalItems(t),(0,c.onMarkupCards)(e,i.refs.trandingContainer),g.saveTrendingCurentPage(e),i.refs.loader.classList.add("is-hidden")}))}function y(){i.refs.trandingContainer.innerHTML=""}async function v(){const e=await u.fetchMovies();if(0===e.results.length)return i.refs.SearchErrMessage.classList.remove("is-hidden"),void(u.query=p);i.refs.SearchErrMessage.classList.add("is-hidden"),p=u.query,f.setTotalItems(e.total_results),y(),u.resetMoviesPage(),(0,c.onMarkupCards)(e.results,i.refs.trandingContainer),g.saveTrendingCurentPage(e.results),function(e){1===e.total_pages?i.refs.paginationContainer.style.display="none":"none"===i.refs.paginationContainer.style.display&&i.refs.paginationContainer.removeAttribute("style")}(e)}i.refs.loader.classList.remove("is-hidden"),function(){g.getGeneresLS()||u.fetchGenres().then(g.saveGenersLS);h()}(),i.refs.paginationContainer.addEventListener("click",(function(e){if(e.target.classList.contains("tui-pagination"))return;y();const t=f.getCurrentPage();u.addMoviesPage(t),""===u.query?h():""!==u.query&&v()}));const b=document.querySelector(".button-to-top"),m=document.querySelector(".to-top-icon");b.addEventListener("click",(function(){window.scrollTo(0,0)})),window.onscroll=function(){document.body.scrollTop>700||document.documentElement.scrollTop>700?(b.style.visibility="visible",m.style.opacity=1,b.style.opacity=1):(b.style.visibility="hiden",m.style.opacity=0,b.style.opacity=0)},r("5eWcy"),r("1wewW");
//# sourceMappingURL=index.6f45f6fd.js.map
