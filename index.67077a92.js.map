{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-5d02381bca7ce49e.js","src/index.js","src/js/home-page/homePage.js","src/js/helpers/pagination/options-of-pagination.js","node_modules/@parcel/runtime-js/lib/runtime-9c8d57e592ab918e.js","src/js/widget/buttonToTop.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.67077a92.js\\\",\\\"ehxus\\\":\\\"arrowssprite.6a2c4930.svg\\\",\\\"b9auz\\\":\\\"index.1b6f5e92.js\\\"}\"));","import './js/dark-theme';\nimport './js/home-page/homePage';\nimport './js/widget/buttonToTop';\nimport './js/all-api/local-storage-api';\nimport './js/footer-modal';\nimport './js/modal-film/modalWindow';\n","import { refs } from '../helpers/refs';\nimport MovieApiService from '../all-api/fetchModule';\nimport localStorageAPI from '../all-api/local-storage-api';\nimport { onMarkupCards } from '../helpers/onMarkupCards';\nimport Pagination from 'tui-pagination';\nimport { options } from '../helpers/pagination/options-of-pagination';\nimport { initChangeOfThemeOnMain } from '../dark-theme';\n// import openModal from'./modalWindow';\n\nconst API = new MovieApiService();\nconst LS_API = new localStorageAPI();\n\nlet oldQuery = '';\n\nrefs.searchInput.addEventListener('submit', searchFilm);\n\nconst pagination = new Pagination(refs.paginationContainer, options);\n\nrefs.loader.classList.remove('is-hidden');\n\ngenerateHomePage();\n// initChangeOfThemeOnMain();\n\nfunction generateHomePage() {\n  if (!LS_API.getGeneresLS()) {\n    API.fetchGenres().then(LS_API.saveGenersLS);\n  }\n\n  // getSiteTheme();\n  generateTrendingFilms();\n}\n\nfunction generateTrendingFilms() {\n  API.fetchTrending().then(({ results, total_results }) => {\n    pagination.setTotalItems(total_results);\n    onMarkupCards(results, refs.trandingContainer);\n    if (refs.paginationContainer.style.display === 'none') {\n      refs.paginationContainer.removeAttribute('style');\n    }\n    LS_API.saveTrendingCurentPage(results);\n\n    refs.loader.classList.add('is-hidden');\n  });\n}\n\nrefs.paginationContainer.addEventListener(\n  'click',\n  renderNewPageOfTrendingFilms\n);\n\nfunction renderNewPageOfTrendingFilms(e) {\n  if (\n    // !e.target.classList.contains('tui-page-btn') ||\n    // e.target.classList.contains('tui-is-selected') ||\n    // e.target.classList.contains('tui-is-disabled')\n    e.target.classList.contains('tui-pagination')\n  )\n    return;\n\n  clearGallery();\n\n  const newCurrentPage = pagination.getCurrentPage();\n\n  API.addMoviesPage(newCurrentPage);\n\n  if (API.query === '') {\n    generateTrendingFilms();\n  } else if (API.query !== '') {\n    fetchSearchFilms();\n  }\n}\n\nfunction clearGallery() {\n  refs.trandingContainer.innerHTML = '';\n}\n\nasync function searchFilm(ev) {\n  ev.preventDefault();\n\n  API.query = ev.currentTarget.elements.searchQuery.value;\n\n  if (API.query === '') return;\n\n  API.resetMoviesPage();\n\n  refs.loader.classList.remove('is-hidden');\n\n  await fetchSearchFilms();\n  if (refs.SearchErrMessage.classList.contains('is-hidden')) {\n    pagination.reset();\n  }\n\n  refs.loader.classList.add('is-hidden');\n}\n\nasync function fetchSearchFilms() {\n  const data = await API.fetchMovies();\n\n  if (data.results.length === 0) {\n    refs.SearchErrMessage.classList.remove('is-hidden');\n    setTimeout(() => refs.SearchErrMessage.classList.add('is-hidden'), 4000);\n\n    API.query = oldQuery;\n    return;\n  } else {\n    refs.SearchErrMessage.classList.add('is-hidden');\n  }\n  oldQuery = API.query;\n  pagination.setTotalItems(data.total_results);\n  clearGallery();\n  API.resetMoviesPage();\n  onMarkupCards(data.results, refs.trandingContainer);\n  LS_API.saveTrendingCurentPage(data.results);\n\n  hidePaginationForSearch(data);\n}\n\nfunction hidePaginationForSearch(data) {\n  if (data.total_pages === 1) {\n    refs.paginationContainer.style.display = 'none';\n  } else if (refs.paginationContainer.style.display === 'none') {\n    refs.paginationContainer.removeAttribute('style');\n  }\n}\n","import sprite from '../../../images/icons/arrowssprite.svg';\n\nconst arrowIcon = `${sprite}#icon-arrow`;\nconst dotsIcon = `${sprite}#icon-dots`;\n\nexport const options = {\n  totalItems: 20000,\n  itemsPerPage: 20,\n  visiblePages: 5,\n  page: 1,\n  centerAlign: true,\n  usageStatistics: false,\n  firstItemClassName: 'tui-first-child',\n  lastItemClassName: 'tui-next',\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-btn tui-is-selected\">{{page}}p</strong>',\n    currentPage:\n      '<a href=\"#\" class=\"tui-page-btn tui-is-selected\">{{page}}</a>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}} hide-{{type}}\">' +\n      `<svg class=\"tui-ico-{{type}}\" width=\"16\" height=\"16\"><use href=\"${arrowIcon}-{{type}}\"></use></svg>` +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\" onclick=\"return false\">' +\n      '<span class=\"tui-ico-{{type}}\" onclick=\"return false\">{{type}}</span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip change-{{type}}\">' +\n      `<svg class=\"tui-ico-ellip\" width=\"14\" height=\"14\"><use href=\"${dotsIcon}\"></use></svg>` +\n      '</a>',\n  },\n};\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"ehxus\")).toString();","// const toTopBtn = document.querySelector('.button-to-top');\n// const svgIcon = document.querySelector('.to-top-icon');\n\nimport { refs } from '../helpers/refs';\n\nrefs.toTopBtn.addEventListener('click', onButtonClick);\n\nfunction onButtonClick() {\n  window.scrollTo(0, 0);\n}\n\nwindow.onscroll = function () {\n  scrollFunction();\n};\n\nfunction scrollFunction() {\n  if (\n    document.body.scrollTop > 700 ||\n    document.documentElement.scrollTop > 700\n  ) {\n    refs.toTopBtn.style.visibility = 'visible';\n    refs.svgIcon.style.opacity = 1;\n    refs.toTopBtn.style.opacity = 1;\n  } else {\n    refs.toTopBtn.style.visibility = 'hiden';\n    refs.svgIcon.style.opacity = 0;\n    refs.toTopBtn.style.opacity = 0;\n  }\n}\n"],"names":["parcelRequire","register","JSON","parse","$HnopR","$db81feec78960f96$export$41c562ebe57d11e2","totalItems","itemsPerPage","visiblePages","page","centerAlign","usageStatistics","firstItemClassName","lastItemClassName","template","currentPage","moveButton","$parcel$interopDefault","$f002c755d956fbde$exports","URL","resolve","import","meta","url","toString","disabledMoveButton","moreButton","$b65cc88c04460ac5$var$API","$jYDNX","default","$b65cc88c04460ac5$var$LS_API","$jyy8d","$b65cc88c04460ac5$var$oldQuery","refs","searchInput","addEventListener","async","ev","preventDefault","query","currentTarget","elements","searchQuery","value","resetMoviesPage","loader","classList","remove","$b65cc88c04460ac5$var$fetchSearchFilms","SearchErrMessage","contains","$b65cc88c04460ac5$var$pagination","reset","add","$fb9GJ","paginationContainer","$b65cc88c04460ac5$var$generateTrendingFilms","fetchTrending","then","results","total_results","setTotalItems","$cmA3I","onMarkupCards","trandingContainer","style","display","removeAttribute","saveTrendingCurentPage","$b65cc88c04460ac5$var$clearGallery","innerHTML","data","fetchMovies","length","setTimeout","total_pages","$b65cc88c04460ac5$var$hidePaginationForSearch","getGeneresLS","fetchGenres","saveGenersLS","$b65cc88c04460ac5$var$generateHomePage","e","target","newCurrentPage","getCurrentPage","addMoviesPage","toTopBtn","window","scrollTo","onscroll","document","body","scrollTop","documentElement","visibility","svgIcon","opacity"],"version":3,"file":"index.67077a92.js.map"}