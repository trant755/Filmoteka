{"mappings":"iiBAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,qJCAzDH,EAAA,SCAA,I,EAAAI,EAAAJ,EAAA,S,8ECAAK,EAAAL,EAAA,SCAAM,EAAiBN,EAAA,SAAAO,aAA6C,SAAWP,EAAA,SAAAQ,QAA6C,SDEtH,IAYYC,EAZNC,EAAY,GAAUC,OAAPC,EAAAN,GAAO,eACtBO,EAAW,GAAUF,OAAPC,EAAAN,GAAO,cAEdQ,EAAU,CACrBC,WAAY,IACZC,aAAc,GACdC,aAAc,EACdC,KAAM,EACNC,aAAa,EACbC,iBAAiB,EACjBC,mBAAoB,kBACpBC,kBAAmB,WACnBC,UAAUd,EAkBT,CAjBCS,KAAM,gDACNM,YACE,mEACFZ,EAAAP,EAAA,CAJQI,EAIR,cACE,iEACFG,EAAAP,EAAA,CANQI,EAMR,aACE,+DACA,mEAA6EE,OAAVD,EAAU,2BAC7E,QACFE,EAAAP,EAAA,CAVQI,EAUR,qBACE,+JAGFG,EAAAP,EAAA,CAdQI,EAcR,aACE,0EACA,gEAAyEE,OAATE,EAAS,kBACzE,QAjBMJ,I,WDNZ,IAAMgB,EAAM,IAAI,EAAAC,EAAAC,SACVC,EAAS,IAAI,EAAAC,EAAAF,SAEfG,EAAW,GAEfC,EAAAC,KAAKC,YAAYC,iBAAiB,U,SAuDRC,G,OAAXC,EAAUC,MAAAC,KAAAC,U,IArDzB,IAAMC,EAAa,IAAI5B,EAAA6B,GAAJ,CAAeV,EAAAC,KAAKU,oBAAqB5B,GAc5D,SAAS6B,IACPlB,EAAImB,gBAAgBC,MAAK,SAAAC,G,IAAGC,EAAOD,EAAPC,QAASC,EAAaF,EAAbE,cACnCR,EAAWS,cAAcD,IACzB,EAAAE,EAAAC,eAAcJ,EAAShB,EAAAC,KAAKoB,mBACmB,SAA3CrB,EAAAC,KAAKU,oBAAoBW,MAAMC,SACjCvB,EAAAC,KAAKU,oBAAoBa,gBAAgB,SAE3C3B,EAAO4B,uBAAuBT,GAE9BhB,EAAAC,KAAKyB,OAAOC,UAAUC,IAAI,Y,IA0B9B,SAASC,IACP7B,EAAAC,KAAKoB,kBAAkBS,UAAY,E,UAGtBzB,I,OAAAA,EAAfxB,EAAAR,EAAA,CAAAQ,EAAAkD,GAAAC,MAAA,SAAAC,EAA0B7B,G,qEACxBA,EAAG8B,iBAEHxC,EAAIyC,MAAQ/B,EAAGgC,cAAcC,SAASC,YAAYC,MAEhC,KAAd7C,EAAIyC,MAAY,C,uDAEpBzC,EAAI8C,kBAEJxC,EAAAC,KAAKyB,OAAOC,UAAUc,OAAO,a,SAEvBC,I,OACF1C,EAAAC,KAAK0C,iBAAiBhB,UAAUiB,SAAS,cAC3CnC,EAAWoC,QAGb7C,EAAAC,KAAKyB,OAAOC,UAAUC,IAAI,a,6CAhBHtB,MAAAC,KAAAC,U,UAmBVkC,I,OAAAI,EAAgBxC,MAAAC,KAAAC,U,UAAhBsC,I,OAAAA,EAAfjE,EAAAR,EAAA,CAAAQ,EAAAkD,GAAAC,MAAA,SAAAC,I,IACQc,E,kFAAarD,EAAIsD,c,UAEK,KAFtBD,EAAIE,EAAAC,MAEDlC,QAAQmC,OAAY,C,uBAC3BnD,EAAAC,KAAK0C,iBAAiBhB,UAAUc,OAAO,aACvCW,YAAW,W,OAAMpD,EAAAC,KAAK0C,iBAAiBhB,UAAUC,IAAI,Y,GAAc,KAEnElC,EAAIyC,MAAQpC,E,2BAGZC,EAAAC,KAAK0C,iBAAiBhB,UAAUC,IAAI,a,QAEtC7B,EAAWL,EAAIyC,MACf1B,EAAWS,cAAc6B,EAAK9B,eAC9BY,IACAnC,EAAI8C,mBACJ,EAAArB,EAAAC,eAAc2B,EAAK/B,QAAShB,EAAAC,KAAKoB,mBACjCxB,EAAO4B,uBAAuBsB,EAAK/B,SAEnCqC,EAAwBN,G,6CAnBKzC,MAAAC,KAAAC,U,CAsB/B,SAAS6C,EAAwBN,GACN,IAArBA,EAAKO,YACPtD,EAAAC,KAAKU,oBAAoBW,MAAMC,QAAU,OACW,SAA3CvB,EAAAC,KAAKU,oBAAoBW,MAAMC,SACxCvB,EAAAC,KAAKU,oBAAoBa,gBAAgB,Q,CAhG7CxB,EAAAC,KAAKyB,OAAOC,UAAUc,OAAO,aAI7B,WACO5C,EAAO0D,gBACV7D,EAAI8D,cAAc1C,KAAKjB,EAAO4D,cAGhC7C,G,CAPF8C,GAuBA1D,EAAAC,KAAKU,oBAAoBR,iBACvB,SAIF,SAAsCwD,GACpC,GAAIA,EAAEC,OAAOjC,UAAUiB,SAAS,kBAC9B,OAEFf,IAEA,IAAMgC,EAAiBpD,EAAWqD,iBAElCpE,EAAIqE,cAAcF,GAEA,KAAdnE,EAAIyC,MACNvB,IACuB,KAAdlB,EAAIyC,OACbO,G,KG5DJ1C,EAAA/B,EAAA,UAEAgC,KAAK+D,SAAS7D,iBAAiB,SAE/B,WACE8D,OAAOC,SAAS,EAAG,E,IAGrBD,OAAOE,SAAW,WAMdC,SAASC,KAAKC,UAAY,KAC1BF,SAASG,gBAAgBD,UAAY,KAErCtE,EAAAC,KAAK+D,SAAS1C,MAAMkD,WAAa,UACjCxE,EAAAC,KAAKwE,QAAQnD,MAAMoD,QAAU,EAC7B1E,EAAAC,KAAK+D,SAAS1C,MAAMoD,QAAU,IAE9B1E,EAAAC,KAAK+D,SAAS1C,MAAMkD,WAAa,QACjCxE,EAAAC,KAAKwE,QAAQnD,MAAMoD,QAAU,EAC7B1E,EAAAC,KAAK+D,SAAS1C,MAAMoD,QAAU,E","sources":["node_modules/@parcel/runtime-js/lib/runtime-aa4d593f8cc65eb9.js","src/index.js","src/js/home-page/homePage.js","src/js/helpers/pagination/options-of-pagination.js","node_modules/@parcel/runtime-js/lib/runtime-87a0493c666037cd.js","src/js/widget/buttonToTop.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"EVgbq\\\":\\\"index.4d54cd4e.js\\\",\\\"cHgtv\\\":\\\"arrowssprite.6a2c4930.svg\\\",\\\"2hvCh\\\":\\\"index.9266f08c.js\\\"}\"));","import './js/dark-theme';\nimport './js/home-page/homePage';\nimport './js/widget/buttonToTop';\nimport './js/all-api/local-storage-api';\nimport './js/footer-modal';\nimport './js/modal-film/modalWindow';\n","import { refs } from '../helpers/refs';\nimport MovieApiService from '../all-api/fetchModule';\nimport localStorageAPI from '../all-api/local-storage-api';\nimport { onMarkupCards } from '../helpers/onMarkupCards';\nimport Pagination from 'tui-pagination';\nimport { options } from '../helpers/pagination/options-of-pagination';\nimport { initChangeOfThemeOnMain } from '../dark-theme';\n\nconst API = new MovieApiService();\nconst LS_API = new localStorageAPI();\n\nlet oldQuery = '';\n\nrefs.searchInput.addEventListener('submit', searchFilm);\n\nconst pagination = new Pagination(refs.paginationContainer, options);\n\nrefs.loader.classList.remove('is-hidden');\n\ngenerateHomePage();\n\nfunction generateHomePage() {\n  if (!LS_API.getGeneresLS()) {\n    API.fetchGenres().then(LS_API.saveGenersLS);\n  }\n\n  generateTrendingFilms();\n}\n\nfunction generateTrendingFilms() {\n  API.fetchTrending().then(({ results, total_results }) => {\n    pagination.setTotalItems(total_results);\n    onMarkupCards(results, refs.trandingContainer);\n    if (refs.paginationContainer.style.display === 'none') {\n      refs.paginationContainer.removeAttribute('style');\n    }\n    LS_API.saveTrendingCurentPage(results);\n\n    refs.loader.classList.add('is-hidden');\n  });\n}\n\nrefs.paginationContainer.addEventListener(\n  'click',\n  renderNewPageOfTrendingFilms\n);\n\nfunction renderNewPageOfTrendingFilms(e) {\n  if (e.target.classList.contains('tui-pagination'))\n    return;\n\n  clearGallery();\n\n  const newCurrentPage = pagination.getCurrentPage();\n\n  API.addMoviesPage(newCurrentPage);\n\n  if (API.query === '') {\n    generateTrendingFilms();\n  } else if (API.query !== '') {\n    fetchSearchFilms();\n  }\n}\n\nfunction clearGallery() {\n  refs.trandingContainer.innerHTML = '';\n}\n\nasync function searchFilm(ev) {\n  ev.preventDefault();\n\n  API.query = ev.currentTarget.elements.searchQuery.value;\n\n  if (API.query === '') return;\n\n  API.resetMoviesPage();\n\n  refs.loader.classList.remove('is-hidden');\n\n  await fetchSearchFilms();\n  if (refs.SearchErrMessage.classList.contains('is-hidden')) {\n    pagination.reset();\n  }\n\n  refs.loader.classList.add('is-hidden');\n}\n\nasync function fetchSearchFilms() {\n  const data = await API.fetchMovies();\n\n  if (data.results.length === 0) {\n    refs.SearchErrMessage.classList.remove('is-hidden');\n    setTimeout(() => refs.SearchErrMessage.classList.add('is-hidden'), 4000);\n\n    API.query = oldQuery;\n    return;\n  } else {\n    refs.SearchErrMessage.classList.add('is-hidden');\n  }\n  oldQuery = API.query;\n  pagination.setTotalItems(data.total_results);\n  clearGallery();\n  API.resetMoviesPage();\n  onMarkupCards(data.results, refs.trandingContainer);\n  LS_API.saveTrendingCurentPage(data.results);\n\n  hidePaginationForSearch(data);\n}\n\nfunction hidePaginationForSearch(data) {\n  if (data.total_pages === 1) {\n    refs.paginationContainer.style.display = 'none';\n  } else if (refs.paginationContainer.style.display === 'none') {\n    refs.paginationContainer.removeAttribute('style');\n  }\n}\n","import sprite from '../../../images/icons/arrowssprite.svg';\n\nconst arrowIcon = `${sprite}#icon-arrow`;\nconst dotsIcon = `${sprite}#icon-dots`;\n\nexport const options = {\n  totalItems: 20000,\n  itemsPerPage: 20,\n  visiblePages: 5,\n  page: 1,\n  centerAlign: true,\n  usageStatistics: false,\n  firstItemClassName: 'tui-first-child',\n  lastItemClassName: 'tui-next',\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-btn tui-is-selected\">{{page}}p</strong>',\n    currentPage:\n      '<a href=\"#\" class=\"tui-page-btn tui-is-selected\">{{page}}</a>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}} hide-{{type}}\">' +\n      `<svg class=\"tui-ico-{{type}}\" width=\"16\" height=\"16\"><use href=\"${arrowIcon}-{{type}}\"></use></svg>` +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\" onclick=\"return false\">' +\n      '<span class=\"tui-ico-{{type}}\" onclick=\"return false\">{{type}}</span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip change-{{type}}\">' +\n      `<svg class=\"tui-ico-ellip\" width=\"14\" height=\"14\"><use href=\"${dotsIcon}\"></use></svg>` +\n      '</a>',\n  },\n};\n","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"cHgtv\");","import { refs } from '../helpers/refs';\n\nrefs.toTopBtn.addEventListener('click', onButtonClick);\n\nfunction onButtonClick() {\n  window.scrollTo(0, 0);\n}\n\nwindow.onscroll = function () {\n  scrollFunction();\n};\n\nfunction scrollFunction() {\n  if (\n    document.body.scrollTop > 700 ||\n    document.documentElement.scrollTop > 700\n  ) {\n    refs.toTopBtn.style.visibility = 'visible';\n    refs.svgIcon.style.opacity = 1;\n    refs.toTopBtn.style.opacity = 1;\n  } else {\n    refs.toTopBtn.style.visibility = 'hiden';\n    refs.svgIcon.style.opacity = 0;\n    refs.toTopBtn.style.opacity = 0;\n  }\n}\n"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$hKHmD","$fb0dcb22d1830d94$exports","getBundleURL","resolve","$c1249b0cc2fa2f84$var$_obj","$c1249b0cc2fa2f84$var$arrowIcon","concat","$parcel$interopDefault","$c1249b0cc2fa2f84$var$dotsIcon","$c1249b0cc2fa2f84$export$41c562ebe57d11e2","totalItems","itemsPerPage","visiblePages","page","centerAlign","usageStatistics","firstItemClassName","lastItemClassName","template","currentPage","$1c00419838bdb6e3$var$API","$dPhpw","default","$1c00419838bdb6e3$var$LS_API","$gD1Se","$1c00419838bdb6e3$var$oldQuery","$cMUAb","refs","searchInput","addEventListener","ev","$1c00419838bdb6e3$var$_searchFilm","apply","this","arguments","$1c00419838bdb6e3$var$pagination","$1VFfL","paginationContainer","$1c00419838bdb6e3$var$generateTrendingFilms","fetchTrending","then","param","results","total_results","setTotalItems","$cE7VB","onMarkupCards","trandingContainer","style","display","removeAttribute","saveTrendingCurentPage","loader","classList","add","$1c00419838bdb6e3$var$clearGallery","innerHTML","$2TvXO","mark","_callee","preventDefault","query","currentTarget","elements","searchQuery","value","resetMoviesPage","remove","$1c00419838bdb6e3$var$fetchSearchFilms","SearchErrMessage","contains","reset","$1c00419838bdb6e3$var$_fetchSearchFilms","data","fetchMovies","_ctx","sent","length","setTimeout","$1c00419838bdb6e3$var$hidePaginationForSearch","total_pages","getGeneresLS","fetchGenres","saveGenersLS","$1c00419838bdb6e3$var$generateHomePage","e","target","newCurrentPage","getCurrentPage","addMoviesPage","toTopBtn","window","scrollTo","onscroll","document","body","scrollTop","documentElement","visibility","svgIcon","opacity"],"version":3,"file":"index.4d54cd4e.js.map"}