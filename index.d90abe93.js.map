{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-5d02381bca7ce49e.js","src/js/generateTrandingCard.js","src/js/options-of-pagination.js","node_modules/@parcel/runtime-js/lib/runtime-9c8d57e592ab918e.js","src/js/buttonToTop.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.d90abe93.js\\\",\\\"ehxus\\\":\\\"arrowssprite.6a2c4930.svg\\\",\\\"b9auz\\\":\\\"index.ff68190e.js\\\"}\"));","import { refs } from './refs';\nimport MovieApiService from './fetchModule';\nimport localStorageAPI from './local-storage-api/local-storage-api';\nimport { onMarkupCards } from './onMarkupCards';\nimport Pagination from 'tui-pagination';\nimport { options } from './options-of-pagination';\n\nconst API = new MovieApiService();\nconst LS_API = new localStorageAPI();\n\nlet oldQuery = '';\n\nrefs.searchInput.addEventListener('submit', searchFilm);\n\nconst pagination = new Pagination(refs.paginationContainer, options);\n\nrefs.loader.classList.remove('is-hidden');\n\ngenerateHomePage();\n\nfunction generateHomePage() {\n  if (!LS_API.getGeneresLS()) {\n    API.fetchGenres().then(LS_API.saveGenersLS);\n  }\n  generateTrendingFilms();\n}\n\nfunction generateTrendingFilms() {\n  API.fetchTrending().then(({ results, total_results }) => {\n    pagination.setTotalItems(total_results);\n    onMarkupCards(results, refs.trandingContainer);\n    LS_API.saveTrendingCurentPage(results);\n\n    refs.loader.classList.add('is-hidden');\n  });\n}\n\nrefs.paginationContainer.addEventListener(\n  'click',\n  renderNewPageOfTrendingFilms\n);\n\nfunction renderNewPageOfTrendingFilms(e) {\n  if (\n    // !e.target.classList.contains('tui-page-btn') ||\n    // e.target.classList.contains('tui-is-selected') ||\n    // e.target.classList.contains('tui-is-disabled')\n    e.target.classList.contains('tui-pagination')\n  )\n    return;\n\n  clearGallery();\n\n  const newCurrentPage = pagination.getCurrentPage();\n\n  API.addMoviesPage(newCurrentPage);\n\n  if (API.query === '') {\n    generateTrendingFilms();\n  } else if (API.query !== '') {\n    fetchSearchFilms();\n  }\n}\n\nfunction clearGallery() {\n  refs.trandingContainer.innerHTML = '';\n}\n\nasync function searchFilm(ev) {\n  ev.preventDefault();\n\n  API.query = ev.currentTarget.elements.searchQuery.value;\n\n  if (API.query === '') return;\n\n  API.resetMoviesPage();\n\n  refs.loader.classList.remove('is-hidden');\n\n  await fetchSearchFilms();\n  if (refs.SearchErrMessage.classList.contains('is-hidden')) {\n    pagination.reset();\n  }\n\n  refs.loader.classList.add('is-hidden');\n}\n\nasync function fetchSearchFilms() {\n  const data = await API.fetchMovies();\n\n  if (data.results.length === 0) {\n    refs.SearchErrMessage.classList.remove('is-hidden');\n    setTimeout(() => refs.SearchErrMessage.classList.add('is-hidden'), 4000);\n\n    API.query = oldQuery;\n    return;\n  } else {\n    refs.SearchErrMessage.classList.add('is-hidden');\n  }\n  oldQuery = API.query;\n  pagination.setTotalItems(data.total_results);\n  clearGallery();\n  API.resetMoviesPage();\n  onMarkupCards(data.results, refs.trandingContainer);\n  LS_API.saveTrendingCurentPage(data.results);\n\n  hidePaginationForSearch(data);\n}\n\nfunction hidePaginationForSearch(data) {\n  if (data.total_pages === 1) {\n    refs.paginationContainer.style.display = 'none';\n  } else if (refs.paginationContainer.style.display === 'none') {\n    refs.paginationContainer.removeAttribute('style');\n  }\n}\n","import sprite from '../images/icons/arrowssprite.svg';\n\nconst arrowIcon = `${sprite}#icon-arrow`;\nconst dotsIcon = `${sprite}#icon-dots`;\n\nexport const options = {\n    totalItems: 20000,\n    itemsPerPage: 20,\n    visiblePages: 5,\n    page: 1,\n    centerAlign: true,\n    usageStatistics: false,\n    firstItemClassName: 'tui-first-child',\n    lastItemClassName: 'tui-next',\n    template: {\n      page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n      currentPage: '<strong class=\"tui-page-btn tui-is-selected\">{{page}}p</strong>',\n      currentPage: '<a href=\"#\" class=\"tui-page-btn tui-is-selected\">{{page}}</a>',\n      moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}} hide-{{type}}\">' +\n        `<svg class=\"tui-ico-{{type}}\" width=\"16\" height=\"16\"><use href=\"${arrowIcon}-{{type}}\"></use></svg>` +\n        '</a>',\n      disabledMoveButton:\n        '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\" onclick=\"return false\">' +\n        '<span class=\"tui-ico-{{type}}\" onclick=\"return false\">{{type}}</span>' +\n        '</span>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip change-{{type}}\">' +\n        `<svg class=\"tui-ico-ellip\" width=\"14\" height=\"14\"><use href=\"${dotsIcon}\"></use></svg>` +\n        '</a>',\n    }\n  };","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"ehxus\")).toString();","const toTopBtn = document.querySelector('.button-to-top');\nconst svgIcon = document.querySelector('.to-top-icon');\n\ntoTopBtn.addEventListener('click', onButtonClick);\n\nfunction onButtonClick() {\n  window.scrollTo(0, 0);\n}\n\nwindow.onscroll = function () {\n  scrollFunction();\n};\n\nfunction scrollFunction() {\n  if (\n    document.body.scrollTop > 700 ||\n    document.documentElement.scrollTop > 700\n  ) {\n    toTopBtn.style.visibility = 'visible';\n    svgIcon.style.opacity = 1;\n    toTopBtn.style.opacity = 1;\n  } else {\n    toTopBtn.style.visibility = 'hiden';\n    svgIcon.style.opacity = 0;\n    toTopBtn.style.opacity = 0;\n  }\n}\n"],"names":["parcelRequire","register","JSON","parse","$krGWQ","$25e452009aae3ef0$export$41c562ebe57d11e2","totalItems","itemsPerPage","visiblePages","page","centerAlign","usageStatistics","firstItemClassName","lastItemClassName","template","currentPage","moveButton","$parcel$interopDefault","$f002c755d956fbde$exports","URL","resolve","import","meta","url","toString","disabledMoveButton","moreButton","$45a10bbc04e58c91$var$API","$4eHHv","default","$45a10bbc04e58c91$var$LS_API","$5eWcy","$45a10bbc04e58c91$var$oldQuery","refs","searchInput","addEventListener","async","ev","preventDefault","query","currentTarget","elements","searchQuery","value","resetMoviesPage","loader","classList","remove","$45a10bbc04e58c91$var$fetchSearchFilms","SearchErrMessage","contains","$45a10bbc04e58c91$var$pagination","reset","add","$fb9GJ","paginationContainer","$45a10bbc04e58c91$var$generateTrendingFilms","fetchTrending","then","results","total_results","setTotalItems","$2pdLV","onMarkupCards","trandingContainer","saveTrendingCurentPage","$45a10bbc04e58c91$var$clearGallery","innerHTML","data","fetchMovies","length","setTimeout","total_pages","style","display","removeAttribute","$45a10bbc04e58c91$var$hidePaginationForSearch","getGeneresLS","fetchGenres","saveGenersLS","$45a10bbc04e58c91$var$generateHomePage","e","target","newCurrentPage","getCurrentPage","addMoviesPage","$baa382108c2f403f$var$toTopBtn","document","querySelector","$baa382108c2f403f$var$svgIcon","window","scrollTo","onscroll","body","scrollTop","documentElement","visibility","opacity"],"version":3,"file":"index.d90abe93.js.map"}