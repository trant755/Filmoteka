function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in s){var t=s[e];delete s[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){s[e]=t},t.parcelRequired7c6=i);var a=i("krGWQ");var r=i("5eWcy"),o=i("2pdLV"),c=i("fb9GJ");const l=new class{fetchGenres(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=8a38092ae2d24fc685ebce0502669b7c&language=en-US").then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>{}))}fetchTrending(){return fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=8a38092ae2d24fc685ebce0502669b7c&page=${this.page}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>{}))}fetchMovies(){return fetch(`https://api.themoviedb.org/3/search/movie?api_key=8a38092ae2d24fc685ebce0502669b7c&query=${this.needToFind}&page=${this.page}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).catch((e=>{console.log("Error on try...catch",e)}))}addMoviesPage(e){this.page=e}resetMoviesPage(){this.page=1}get query(){return this.needToFind}set query(e){this.needToFind=e}constructor(){this.needToFind="",this.page=1}},u=new(0,r.default);let d="";a.refs.searchInput.addEventListener("submit",(async function(e){if(e.preventDefault(),l.query=e.currentTarget.elements.searchQuery.value,""===l.query)return;l.resetMoviesPage(),await h(),a.refs.SearchErrMessage.classList.contains("is-hidden")&&p.reset()}));const p=new(e(c))(a.refs.paginationContainer,{totalItems:2e4,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}});function g(){l.fetchTrending().then((({results:e,total_results:t})=>{p.setTotalItems(t),(0,o.onMarkupCards)(e,a.refs.trandingContainer),u.saveTrendingCurentPage(e)}))}function f(){a.refs.trandingContainer.innerHTML=""}async function h(){const e=await l.fetchMovies();if(0===e.results.length)return a.refs.SearchErrMessage.classList.remove("is-hidden"),void(l.query=d);a.refs.SearchErrMessage.classList.add("is-hidden"),d=l.query,p.setTotalItems(e.total_results),f(),l.resetMoviesPage(),(0,o.onMarkupCards)(e.results,a.refs.trandingContainer),u.saveTrendingCurentPage(e.results),function(e){1===e.total_pages?a.refs.paginationContainer.style.display="none":"none"===a.refs.paginationContainer.style.display&&a.refs.paginationContainer.removeAttribute("style")}(e)}!function(){u.getGeneresLS()||l.fetchGenres().then(u.saveGenersLS);g()}(),a.refs.paginationContainer.addEventListener("click",(function(e){if(!e.target.classList.contains("tui-page-btn")||e.target.classList.contains("tui-is-selected")||e.target.classList.contains("tui-is-disabled"))return;f();const t=p.getCurrentPage();l.addMoviesPage(t),""===l.query?g():""!==l.query&&h()}));const y=document.querySelector(".button-to-top"),v=document.querySelector(".to-top-icon");y.addEventListener("click",(function(){window.scrollTo(0,0)})),window.onscroll=function(){document.body.scrollTop>700||document.documentElement.scrollTop>700?(y.style.visibility="visible",v.style.opacity=1,y.style.opacity=1):(y.style.visibility="hiden",v.style.opacity=0,y.style.opacity=0)},i("5eWcy"),i("1wewW");
//# sourceMappingURL=index.03f84e86.js.map
